# План проекта

## Основная концепция

Доступная система мониторинга усталости водителей с аналитикой для казахстанских транспортных компаний, оптимизированная для работы на недорогом оборудовании.

---

## Приоритизация задач для хакатона

### Приоритет 1: Обязательное ядро проекта (MVP)

1. **Настройка Backend и Docker** (TASK_01)
   - Настройка Spring Boot с Java 17
   - Создание базовой структуры приложения
   - Настройка Docker контейнера
   - **Ожидаемый результат**: Приложение "Hello World", запускаемое через Docker

2. **Создание моделей данных** (TASK_02)
   - Создание сущностей Driver и Event
   - Настройка репозиториев с Spring Data JPA
   - Подключение H2 базы данных
   - **Ожидаемый результат**: Работающая структура данных, доступная через JPA

3. **Экран водителя** (TASK_03)
   - Форма входа с полями для имени и ID
   - Интерфейс с отображением видео с камеры
   - Статус-индикаторы (нормальный/усталый/отвлеченный)
   - **Ожидаемый результат**: Работающий интерфейс с доступом к камере

4. **Экран диспетчера** (TASK_04)
   - Список всех водителей
   - Просмотр данных конкретного водителя
   - График и таблица событий
   - **Ожидаемый результат**: Функциональный интерфейс для мониторинга водителей

5. **AI-модели для обнаружения лица и глаз** (TASK_05) ⭐
   - Интеграция SSD модели для обнаружения лица
   - Использование DLib для определения ключевых точек
   - Расчет EAR (Eye Aspect Ratio) для определения сонливости
   - **Ожидаемый результат**: Точное определение состояния водителя с использованием ИИ

6. **Сервис логирования событий** (TASK_06)
   - Сохранение событий усталости и отвлечения в БД
   - Привязка событий к конкретному водителю
   - **Ожидаемый результат**: Корректная запись и хранение событий

7. **Система уведомлений** (TASK_07)
   - Визуальные уведомления для водителя
   - Цветовая индикация состояния
   - **Ожидаемый результат**: Немедленная обратная связь для водителя

8. **Финальная контейнеризация** (TASK_09)
   - Создание docker-compose для запуска всего проекта
   - Оптимизация Docker-образа
   - **Ожидаемый результат**: Запуск всего проекта одной командой

⭐ = Критически важно для оценки по критерию использования ИИ

### Приоритет 2: Дополнительные компоненты (после MVP)

1. **Юнит-тесты** (TASK_08)
   - Тесты для ключевых сервисов
   - Проверка граничных случаев
   - **Ожидаемый результат**: Повышение надежности и стабильности кода

2. **Предиктивная аналитика** (TASK_10)
   - Прогнозирование наступления усталости
   - Расчет факторов риска
   - **Ожидаемый результат**: Проактивное предупреждение о возможной усталости

3. **Улучшенная аналитическая панель**
   - Интерактивные графики
   - Расширенная статистика
   - **Ожидаемый результат**: Более детальный анализ данных

4. **Локализация для Казахстана**
   - Поддержка казахского и русского языков
   - Адаптация под местные особенности
   - **Ожидаемый результат**: Продукт, готовый для казахстанского рынка

---

## Технический стек MVP

- **Frontend**: Простой веб-интерфейс на Bootstrap + jQuery + Thymeleaf
- **Backend**: Java 17 + Spring Boot + Lombok
- **Компьютерное зрение**: 
  - OpenCV через JavaCV
  - SSD модель для обнаружения лица
  - DLib для определения ключевых точек лица
  - Расчет EAR для определения состояния глаз
- **База данных**: H2 (встроенная)
- **Контейнеризация**: Docker для упрощения развертывания и масштабирования

---

## Ключевые шаги реализации ИИ-компонента

1. **Подготовка моделей**:
   - Создать каталог `src/main/resources/models/`
   - Скачать SSD модель `res10_300x300_ssd_iter_140000.caffemodel` и `deploy.prototxt`
   - Скачать DLib модель `shape_predictor_68_face_landmarks.dat`

2. **Интеграция моделей**:
   ```java
   // Загрузка моделей в сервисе
   Net faceDetectionNet = readNetFromCaffe(prototxtPath, caffeModelPath);
   ShapePredictor landmarkDetector = new ShapePredictor();
   landmarkDetector.load(landmarkModelPath);
   ```

3. **Процесс обработки кадров**:
   - Обрабатывать 1 кадр в секунду
   - Уменьшить размер кадра для ускорения обработки
   - Сначала проверять наличие лица, затем анализировать состояние глаз
   - Рассчитать EAR и определить состояние водителя

4. **Оптимизация производительности**:
   - Обрабатывать каждый 30-й кадр (1 FPS при 30 FPS видео)
   - Увеличить частоту обработки при обнаружении тревожных признаков
   - Масштабировать изображение до 320x240 для анализа

---

## Ключевые точки презентации

1. **Демонстрация работающего ИИ-детектора** (2 мин)
    - Показать распознавание лица и глаз с SSD и DLib моделями
    - Продемонстрировать обнаружение состояний в режиме реального времени
    - Акцентировать внимание на точности ИИ-решения

2. **Бизнес-кейс для казахстанских компаний** (2 мин)
    - Статистика ДТП из-за усталости в Казахстане
    - Расчет экономической эффективности внедрения системы
    - Сравнение стоимости с зарубежными аналогами

3. **Техническая реализация и масштабируемость** (1 мин)
    - Архитектура системы
    - Использование Docker для быстрого масштабирования
    - Возможности расширения функциональности

4. **Дорожная карта и потенциал развития** (1 мин)
    - План развития от прототипа к полноценному продукту
    - Перспективы для рынка Казахстана и СНГ

---

## Показатели для демонстрации (соответствие критериям оценки)

### 1. Реализация (до 10 баллов)
- Работающее приложение без ошибок
- Понятный и интуитивный интерфейс
- Полная демонстрация пользовательских сценариев

### 2. Использование ИИ (до 10 баллов)
- Интеграция SSD модели для обнаружения лица
- Использование DLib для ключевых точек
- Алгоритм расчета EAR для определения усталости
- Оптимизированный конвейер обработки видео

### 3. Продуманность решения (до 10 баллов)
- Детальный анализ проблемы усталости водителей
- Сравнение с существующими решениями
- Обоснование технических решений

### 4. Потенциал проекта (до 10 баллов)
- SaaS-модель с гибкими тарифами
- Анализ рынка транспортных компаний Казахстана
- Стратегия масштабирования и развития

### 5. Защита проекта (до 10 баллов)
- Структурированная презентация
- Четкая демонстрация работы системы
- Подготовленные ответы на вопросы жюри

---

## Контрольный список для успешной демонстрации

- [ ] Подготовить запасные видео с примерами усталости и отвлечения
- [ ] Создать резервную копию проекта и демонстрационных материалов
- [ ] Проверить работу Docker-контейнера на "чистой" машине
- [ ] Подготовить слайды с бизнес-показателями и техническими деталями
- [ ] Протестировать работу с веб-камерой на компьютере для презентации

---

## Заключение

Этот план проекта разделяет задачи на первостепенные (необходимые для MVP) и второстепенные (для улучшения после создания основы). Особое внимание уделено компоненту ИИ (TASK_05), который критически важен для получения высокой оценки по критерию использования искусственного интеллекта.
